import{r as j,j as e,C as T,R as r,a as l,c as a}from"./index-CjvveDhR.js";import{T as N}from"./Table-32sEwHPQ.js";const A=({formData:s,selectedQuote:t,invoiceNumber:u,currentDate:y,isViewMode:h=!1})=>{const[n,g]=j.useState({companyName:"Perimetros Maitenrehue",companySlogan:"Especialistas en Cercos Vibrados",companyAddress:"Dirección de la Empresa",companyCity:"Angol, La Araucanía, Chile",companyPhone:"+56 9 XXXX XXXX",companyFax:"Fax: +56 45 XXX XXX",documentTitle:h?"FACTURA":"COTIZACIÓN",issueDate:y||new Date().toLocaleDateString("es-CL"),quotationNumber:u||"100",clientId:"CLI-001",validUntil:h?"Factura generada":new Date(Date.now()+2592e6).toLocaleDateString("es-CL"),preparedBy:"Administrador",seller:"Vendedor Principal",orderNumber:"",shipDate:"Por definir",shippingMethod:"Transporte propio",fobPoint:"Angol, Chile",terms:"Pago contra entrega",subtotal:0,taxRate:19,salesTax:0,other:0,total:0}),[p,b]=j.useState([]);j.useEffect(()=>{if(t||s){let c=[];t&&(c=[{quantity:t.linearMeters||1,description:`Cerco Vibrado ${t.fenceHeight} - ${t.fenceType}`,unitPrice:C(t.fenceHeight,t.linearMeters),taxes:0,amount:0}]),c=c.map(i=>({...i,amount:i.quantity*i.unitPrice+i.taxes})),b(c),v(c)}},[t,s]);const C=(c,i)=>({"1.50m":45e3,"1.90m":55e3,"2.10m":65e3,"2.40m":75e3,Otra:6e4})[c]||6e4,v=c=>{const i=c.reduce((x,m)=>x+m.quantity*m.unitPrice,0),o=i*(n.taxRate/100),P=i+o+n.other;g(x=>({...x,subtotal:i,salesTax:o,total:P}))},d=c=>new Intl.NumberFormat("es-CL",{style:"currency",currency:"CLP"}).format(c);return e.jsx("div",{className:"invoice-template",id:"invoice-template",children:e.jsxs(T,{fluid:!0,className:"invoice-container",children:[e.jsxs(r,{className:"invoice-header mb-4",children:[e.jsx(l,{md:8,children:e.jsxs("div",{className:"company-info",children:[e.jsx("h1",{className:"company-name",children:n.companyName}),e.jsx("p",{className:"company-slogan",children:n.companySlogan}),e.jsxs("div",{className:"company-details mt-3",children:[e.jsx("p",{className:"mb-1",children:n.companyAddress}),e.jsx("p",{className:"mb-1",children:n.companyCity}),e.jsx("p",{className:"mb-1",children:n.companyPhone}),e.jsx("p",{className:"mb-0",children:n.companyFax})]})]})}),e.jsx(l,{md:4,className:"text-end",children:e.jsxs("div",{className:"document-info",children:[e.jsx("h2",{className:"document-title",children:n.documentTitle}),e.jsxs("div",{className:"document-details mt-3",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Fecha de emisión:"})," ",n.issueDate]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Número de cotización:"})," ",n.quotationNumber]}),e.jsxs("p",{children:[e.jsx("strong",{children:"ID del cliente:"})," ",n.clientId]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Validez hasta:"})," ",n.validUntil]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Preparado por:"})," ",n.preparedBy]})]})]})})]}),e.jsx(r,{className:"client-section mb-4",children:e.jsx(l,{children:e.jsx(a,{className:"client-card",children:e.jsxs(a.Body,{children:[e.jsx("h4",{className:"section-title",children:h?"Facturado a:":"Cotización para:"}),e.jsxs("div",{className:"client-details",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Nombre:"})," ",s==null?void 0:s.firstName," ",s==null?void 0:s.lastName]}),(s==null?void 0:s.companyName)&&e.jsxs("p",{children:[e.jsx("strong",{children:"Compañía:"})," ",s.companyName]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Dirección:"})," ",s==null?void 0:s.streetAddress]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Ciudad:"})," ",s==null?void 0:s.city,", ",s==null?void 0:s.region]}),(s==null?void 0:s.postalCode)&&e.jsxs("p",{children:[e.jsx("strong",{children:"Código postal:"})," ",s.postalCode]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Teléfono:"})," ",s==null?void 0:s.phone]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",s==null?void 0:s.email]})]})]})})})}),e.jsx(r,{className:"comments-section mb-4",children:e.jsx(l,{children:e.jsx(a,{className:"comments-card",children:e.jsxs(a.Body,{children:[e.jsx("h5",{children:"Comentarios o instrucciones:"}),e.jsx("p",{className:"comments-text",children:(s==null?void 0:s.orderNotes)||"Ninguno"})]})})})}),e.jsx(r,{className:"logistics-section mb-4",children:e.jsx(l,{children:e.jsxs(N,{className:"logistics-table",children:[e.jsx("thead",{className:"table-header-blue",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Vendedor"}),e.jsx("th",{children:"Número de O/C"}),e.jsx("th",{children:"Fecha de envío"}),e.jsx("th",{children:"Envío mediante"}),e.jsx("th",{children:"Punto F.O.B."}),e.jsx("th",{children:"Términos"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{children:n.seller}),e.jsx("td",{children:n.orderNumber}),e.jsx("td",{children:n.shipDate}),e.jsx("td",{children:n.shippingMethod}),e.jsx("td",{children:n.fobPoint}),e.jsx("td",{children:n.terms})]})})]})})}),e.jsx(r,{className:"items-section mb-4",children:e.jsx(l,{children:e.jsxs(N,{className:"items-table",children:[e.jsx("thead",{className:"table-header",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Cantidad"}),e.jsx("th",{children:"Descripción"}),e.jsx("th",{children:"Precio unitario"}),e.jsx("th",{children:"Impuestos"}),e.jsx("th",{children:"Monto"})]})}),e.jsxs("tbody",{children:[p.map((c,i)=>e.jsxs("tr",{children:[e.jsx("td",{children:c.quantity}),e.jsx("td",{children:c.description}),e.jsx("td",{children:d(c.unitPrice)}),e.jsx("td",{children:d(c.taxes)}),e.jsx("td",{children:d(c.amount)})]},i)),p.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"text-center text-muted",children:"No hay items para mostrar"})})]})]})})}),e.jsxs(r,{className:"totals-section mb-4",children:[e.jsx(l,{md:8}),e.jsx(l,{md:4,children:e.jsx(a,{className:"totals-card",children:e.jsx(a.Body,{children:e.jsxs("div",{className:"totals-details",children:[e.jsxs("div",{className:"total-line",children:[e.jsx("span",{children:"Subtotal:"}),e.jsx("span",{children:d(n.subtotal)})]}),e.jsxs("div",{className:"total-line",children:[e.jsxs("span",{children:["Tasa de impuesto (",n.taxRate,"%):"]}),e.jsxs("span",{children:[n.taxRate,"%"]})]}),e.jsxs("div",{className:"total-line",children:[e.jsx("span",{children:"Impuesto a las ventas:"}),e.jsx("span",{children:d(n.salesTax)})]}),e.jsxs("div",{className:"total-line",children:[e.jsx("span",{children:"Otros:"}),e.jsx("span",{children:d(n.other)})]}),e.jsx("hr",{}),e.jsx("div",{className:"total-line total-final",children:e.jsxs("strong",{children:[e.jsx("span",{children:"Total final:"}),e.jsx("span",{children:d(n.total)})]})})]})})})})]}),e.jsx(r,{className:"footer-section",children:e.jsx(l,{children:e.jsxs("div",{className:"invoice-footer",children:[e.jsx("p",{className:"footer-text",children:"Si desea realizar alguna consulta con respecto a esta cotización, no dude en contactarnos. Estamos aquí para ayudarle."}),e.jsx("h4",{className:"thank-you",children:"¡GRACIAS POR SU COMPRA!"})]})})})]})})};export{A as I};
