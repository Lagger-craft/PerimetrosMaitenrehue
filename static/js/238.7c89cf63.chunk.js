"use strict";(self.webpackChunkcercovibrados_web=self.webpackChunkcercovibrados_web||[]).push([[238],{5479:(e,r,n)=>{n.r(r),n.d(r,{default:()=>D});var t=n(2555),a=n(5043),s=n(3519),i=n(1072),l=n(8602),o=n(4282),c=n(8628),d=n(3814),u=n(45),m=n(8139),h=n.n(m),p=n(7852),v=n(579);const f=["bsPrefix","className","striped","bordered","borderless","hover","size","variant","responsive"],g=a.forwardRef((e,r)=>{let{bsPrefix:n,className:a,striped:s,bordered:i,borderless:l,hover:o,size:c,variant:d,responsive:m}=e,g=(0,u.A)(e,f);const x=(0,p.oU)(n,"table"),b=h()(a,x,d&&"".concat(x,"-").concat(d),c&&"".concat(x,"-").concat(c),s&&"".concat(x,"-").concat("string"===typeof s?"striped-".concat(s):"striped"),i&&"".concat(x,"-bordered"),l&&"".concat(x,"-borderless"),o&&"".concat(x,"-hover")),j=(0,v.jsx)("table",(0,t.A)((0,t.A)({},g),{},{className:b,ref:r}));if(m){let e="".concat(x,"-responsive");return"string"===typeof m&&(e="".concat(e,"-").concat(m)),(0,v.jsx)("div",{className:e,children:j})}return j});g.displayName="Table";const x=g;var b=n(3637),j=n(1719),A=n(3083),w=n(9981),y=n(8729),N=n(5173),O=n.n(N),P=["color","size","title","className"];function C(){return C=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)({}).hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},C.apply(null,arguments)}var z=(0,a.forwardRef)(function(e,r){var n=e.color,t=void 0===n?"currentColor":n,s=e.size,i=void 0===s?"1em":s,l=e.title,o=void 0===l?null:l,c=e.className,d=void 0===c?"":c,u=function(e,r){if(null==e)return{};var n,t,a=function(e,r){if(null==e)return{};var n={};for(var t in e)if({}.hasOwnProperty.call(e,t)){if(-1!==r.indexOf(t))continue;n[t]=e[t]}return n}(e,r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(t=0;t<s.length;t++)n=s[t],-1===r.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,P);return a.createElement("svg",C({ref:r,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:i,height:i,fill:t,className:["bi","bi-plus-circle",d].filter(Boolean).join(" ")},u),o?a.createElement("title",null,o):null,a.createElement("path",{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"}),a.createElement("path",{d:"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4"}))});z.propTypes={color:O().string,size:O().oneOfType([O().string,O().number]),title:O().string,className:O().string};const k=z;var E=["color","size","title","className"];function S(){return S=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)({}).hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},S.apply(null,arguments)}var B=(0,a.forwardRef)(function(e,r){var n=e.color,t=void 0===n?"currentColor":n,s=e.size,i=void 0===s?"1em":s,l=e.title,o=void 0===l?null:l,c=e.className,d=void 0===c?"":c,u=function(e,r){if(null==e)return{};var n,t,a=function(e,r){if(null==e)return{};var n={};for(var t in e)if({}.hasOwnProperty.call(e,t)){if(-1!==r.indexOf(t))continue;n[t]=e[t]}return n}(e,r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(t=0;t<s.length;t++)n=s[t],-1===r.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,E);return a.createElement("svg",S({ref:r,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:i,height:i,fill:t,className:["bi","bi-pencil-square",d].filter(Boolean).join(" ")},u),o?a.createElement("title",null,o):null,a.createElement("path",{d:"M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"}),a.createElement("path",{fillRule:"evenodd",d:"M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5z"}))});B.propTypes={color:O().string,size:O().oneOfType([O().string,O().number]),title:O().string,className:O().string};const H=B;var L=["color","size","title","className"];function M(){return M=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)({}).hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},M.apply(null,arguments)}var T=(0,a.forwardRef)(function(e,r){var n=e.color,t=void 0===n?"currentColor":n,s=e.size,i=void 0===s?"1em":s,l=e.title,o=void 0===l?null:l,c=e.className,d=void 0===c?"":c,u=function(e,r){if(null==e)return{};var n,t,a=function(e,r){if(null==e)return{};var n={};for(var t in e)if({}.hasOwnProperty.call(e,t)){if(-1!==r.indexOf(t))continue;n[t]=e[t]}return n}(e,r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(t=0;t<s.length;t++)n=s[t],-1===r.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,L);return a.createElement("svg",M({ref:r,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:i,height:i,fill:t,className:["bi","bi-trash",d].filter(Boolean).join(" ")},u),o?a.createElement("title",null,o):null,a.createElement("path",{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z"}),a.createElement("path",{d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z"}))});T.propTypes={color:O().string,size:O().oneOfType([O().string,O().number]),title:O().string,className:O().string};const V=T;var q=n(4259);const G=n.p+"static/media/pilaPlameta.ee1fa4928f31b86511e0.webp",I=[{id:1,name:"Placa de Hormig\xf3n Est\xe1ndar",description:"Placa de hormig\xf3n vibrado de alta resistencia para cercos perimetrales.",stock:150,price:12500,image:q},{id:2,name:"Poste de Hormig\xf3n 1.90m",description:"Poste de hormig\xf3n para cercos de 1.90m de altura.",stock:80,price:18e3,image:G},{id:3,name:"Placa de Hormig\xf3n con Dise\xf1o",description:"Placa de hormig\xf3n con dise\xf1o de ladrillo, para un acabado m\xe1s est\xe9tico.",stock:95,price:15e3,image:q}],R=e=>{let{show:r,handleClose:n,handleSave:s,product:c}=e;const[u,m]=(0,a.useState)({name:"",description:"",stock:0,price:0});(0,a.useEffect)(()=>{m(c||{name:"",description:"",stock:0,price:0})},[c]);const h=e=>{const{name:r,value:n}=e.target;let a=n;"stock"!==r&&"price"!==r||(a=parseInt(n,10),isNaN(a)&&(a=0)),m(e=>(0,t.A)((0,t.A)({},e),{},{[r]:a}))};return(0,v.jsxs)(A.A,{show:r,onHide:n,centered:!0,children:[(0,v.jsx)(A.A.Header,{closeButton:!0,children:(0,v.jsx)(A.A.Title,{children:c?"Editar Producto":"Agregar Producto"})}),(0,v.jsx)(A.A.Body,{children:(0,v.jsxs)(d.A,{onSubmit:e=>{e.preventDefault(),s(u)},children:[(0,v.jsxs)(d.A.Group,{className:"mb-3",children:[(0,v.jsx)(d.A.Label,{children:"Nombre del Producto"}),(0,v.jsx)(d.A.Control,{type:"text",name:"name",value:u.name,onChange:h,required:!0})]}),(0,v.jsxs)(d.A.Group,{className:"mb-3",children:[(0,v.jsx)(d.A.Label,{children:"Descripci\xf3n"}),(0,v.jsx)(d.A.Control,{as:"textarea",rows:3,name:"description",value:u.description,onChange:h})]}),(0,v.jsxs)(i.A,{children:[(0,v.jsx)(l.A,{children:(0,v.jsxs)(d.A.Group,{className:"mb-3",children:[(0,v.jsx)(d.A.Label,{children:"Stock"}),(0,v.jsx)(d.A.Control,{type:"number",name:"stock",value:u.stock,onChange:h,required:!0,min:"0"})]})}),(0,v.jsx)(l.A,{children:(0,v.jsxs)(d.A.Group,{className:"mb-3",children:[(0,v.jsx)(d.A.Label,{children:"Precio"}),(0,v.jsx)(d.A.Control,{type:"number",name:"price",value:u.price,onChange:h,required:!0,min:"0"})]})})]}),(0,v.jsx)(o.A,{variant:"primary",type:"submit",className:"w-100",children:"Guardar Cambios"})]})})]})},D=()=>{const{user:e}=(0,a.useContext)(y.A),r=(0,w.Zp)(),[n,u]=(0,a.useState)(I),[m,h]=(0,a.useState)(!1),[p,f]=(0,a.useState)(null),[g,A]=(0,a.useState)(""),N=e=>e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase();(0,a.useEffect)(()=>{e&&"admin"===e.role||r("/administracion")},[e,r]);const O=()=>{h(!1),f(null)},P=function(){f(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null),h(!0)},C=n.filter(e=>N(e.name).includes(N(g)));return(0,v.jsxs)("section",{className:"bodega-page-section",children:[(0,v.jsxs)(s.A,{fluid:!0,children:[(0,v.jsxs)(i.A,{className:"mb-4 align-items-center",children:[(0,v.jsx)(l.A,{children:(0,v.jsx)("h2",{className:"text-white",children:"Gesti\xf3n de Bodega"})}),(0,v.jsx)(l.A,{xs:"auto",children:(0,v.jsxs)(o.A,{variant:"success",onClick:()=>P(),children:[(0,v.jsx)(k,{className:"me-2"}),"Agregar Producto"]})})]}),(0,v.jsxs)(c.A,{className:"shadow-sm",children:[(0,v.jsx)(c.A.Header,{children:(0,v.jsx)(d.A.Control,{type:"text",placeholder:"Buscar producto por nombre...",value:g,onChange:e=>A(e.target.value)})}),(0,v.jsx)(c.A.Body,{children:(0,v.jsxs)(x,{responsive:!0,hover:!0,className:"product-table",children:[(0,v.jsx)("thead",{children:(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{children:"Imagen"}),(0,v.jsx)("th",{children:"Nombre"}),(0,v.jsx)("th",{children:"Stock"}),(0,v.jsx)("th",{children:"Precio"}),(0,v.jsx)("th",{children:"Acciones"})]})}),(0,v.jsx)("tbody",{children:C.length>0?C.map(e=>(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{children:(0,v.jsx)(b.A,{src:e.image,rounded:!0,width:"60"})}),(0,v.jsx)("td",{className:"fw-bold",children:e.name}),(0,v.jsx)("td",{children:(0,v.jsxs)("span",{className:"badge ".concat(e.stock>50?"bg-success":e.stock>10?"bg-warning":"bg-danger"),children:[e.stock," unidades"]})}),(0,v.jsxs)("td",{children:["$",e.price.toLocaleString("es-CL")]}),(0,v.jsxs)("td",{children:[(0,v.jsx)(o.A,{variant:"outline-primary",size:"sm",className:"me-2",onClick:()=>P(e),children:(0,v.jsx)(H,{})}),(0,v.jsx)(o.A,{variant:"outline-danger",size:"sm",onClick:()=>{return r=e.id,void(window.confirm("\xbfEst\xe1s seguro de que quieres eliminar este producto?")&&u(n.filter(e=>e.id!==r)));var r},children:(0,v.jsx)(V,{})})]})]},e.id)):(0,v.jsx)("tr",{children:(0,v.jsx)("td",{colSpan:"5",className:"text-center",children:(0,v.jsx)(j.A,{variant:"info",children:"No se encontraron productos."})})})})]})})]})]}),(0,v.jsx)(R,{show:m,handleClose:O,handleSave:e=>{if(p)u(n.map(r=>r.id===p.id?(0,t.A)((0,t.A)({},r),e):r));else{const r=(0,t.A)((0,t.A)({id:Math.max(...n.map(e=>e.id))+1},e),{},{image:q});u([...n,r])}O()},product:p})]})}}}]);
//# sourceMappingURL=238.7c89cf63.chunk.js.map