"use strict";(self.webpackChunkcercovibrados_web=self.webpackChunkcercovibrados_web||[]).push([[981],{1719:(e,s,a)=>{a.d(s,{A:()=>y});var r=a(2555),n=a(45),i=a(8139),t=a.n(i),l=a(5043),c=a(1969),o=a(6618),d=a(7852),h=a(4488),x=a(579);const m=["className","bsPrefix","as"],j=(0,h.A)("h4");j.displayName="DivStyledAsH4";const A=l.forwardRef((e,s)=>{let{className:a,bsPrefix:i,as:l=j}=e,c=(0,n.A)(e,m);return i=(0,d.oU)(i,"alert-heading"),(0,x.jsx)(l,(0,r.A)({ref:s,className:t()(a,i)},c))});A.displayName="AlertHeading";const u=A;var f=a(7071);const p=["className","bsPrefix","as"],g=l.forwardRef((e,s)=>{let{className:a,bsPrefix:i,as:l=f.A}=e,c=(0,n.A)(e,p);return i=(0,d.oU)(i,"alert-link"),(0,x.jsx)(l,(0,r.A)({ref:s,className:t()(a,i)},c))});g.displayName="AlertLink";const b=g;var N=a(8072),w=a(5632);const v=["bsPrefix","show","closeLabel","closeVariant","className","children","variant","onClose","dismissible","transition"],C=l.forwardRef((e,s)=>{const a=(0,c.Zw)(e,{show:"onClose"}),{bsPrefix:i,show:l=!0,closeLabel:h="Close alert",closeVariant:m,className:j,children:A,variant:u="primary",onClose:f,dismissible:p,transition:g=N.A}=a,b=(0,n.A)(a,v),C=(0,d.oU)(i,"alert"),y=(0,o.A)(e=>{f&&f(!1,e)}),k=!0===g?N.A:g,S=(0,x.jsxs)("div",(0,r.A)((0,r.A)({role:"alert"},k?void 0:b),{},{ref:s,className:t()(j,C,u&&"".concat(C,"-").concat(u),p&&"".concat(C,"-dismissible")),children:[p&&(0,x.jsx)(w.A,{onClick:y,"aria-label":h,variant:m}),A]}));return k?(0,x.jsx)(k,(0,r.A)((0,r.A)({unmountOnExit:!0},b),{},{ref:void 0,in:l,children:S})):l?S:null});C.displayName="Alert";const y=Object.assign(C,{Link:b,Heading:u})},4981:(e,s,a)=>{a.r(s),a.d(s,{default:()=>j});var r=a(5043),n=a(3519),i=a(1072),t=a(8602),l=a(8628),c=a(4282),o=a(1719),d=a(3083),h=a(8729),x=a(9981),m=(a(1858),a(579));const j=()=>{const{user:e,logout:s}=(0,r.useContext)(h.A),a=(0,x.Zp)(),[j,A]=(0,r.useState)([]),[u,f]=(0,r.useState)(!0),[p,g]=(0,r.useState)(null),[b,N]=(0,r.useState)(!1),[w,v]=(0,r.useState)(null);(0,r.useEffect)(()=>{if(!e||"admin"!==e.role)return void a("/administracion");(async()=>{try{const e=localStorage.getItem("token"),r=await fetch("http://localhost:5000/api/quotes",{headers:{Authorization:"Bearer ".concat(e)}});if(!r.ok){if(403!==r.status)throw new Error("Error al cargar las cotizaciones.");g("No tienes permisos para ver las cotizaciones."),await s(),a("/administracion")}const n=await r.json();A(n)}catch(e){g(e.message)}finally{f(!1)}})()},[e,a,s]);const C=()=>{N(!1),v(null)};return u?(0,m.jsx)("div",{className:"admin-dashboard-section text-center text-white p-5",children:"Cargando cotizaciones..."}):p?(0,m.jsxs)("div",{className:"admin-dashboard-section text-center text-danger p-5",children:["Error: ",p]}):(0,m.jsxs)("section",{className:"admin-dashboard-section py-5",children:[(0,m.jsxs)(n.A,{children:[(0,m.jsx)("h2",{className:"text-center mb-5 text-uppercase fw-semibold text-white",children:"Panel de Administraci\xf3n - Cotizaciones"}),(0,m.jsx)(i.A,{xs:1,md:2,lg:3,className:"g-4",children:j.length>0?j.map(e=>(0,m.jsx)(t.A,{children:(0,m.jsx)(l.A,{className:"quote-admin-card h-100",children:(0,m.jsxs)(l.A.Body,{className:"d-flex flex-column",children:[(0,m.jsx)(l.A.Title,{className:"fw-bold",children:e.name}),(0,m.jsxs)(l.A.Text,{children:[(0,m.jsx)("strong",{children:"RUT:"})," ",e.rut,(0,m.jsx)("br",{}),(0,m.jsx)("strong",{children:"Altura Cerco:"})," ",e.fenceHeight]}),(0,m.jsx)(c.A,{variant:"primary",onClick:()=>(e=>{v(e),N(!0)})(e),className:"mt-auto",children:"M\xe1s Informaci\xf3n"})]})})},e.id)):(0,m.jsx)(t.A,{children:(0,m.jsx)(o.A,{variant:"info",children:"No hay cotizaciones para mostrar."})})})]}),(0,m.jsxs)(d.A,{show:b,onHide:C,centered:!0,size:"lg",children:[(0,m.jsx)(d.A.Header,{closeButton:!0,children:(0,m.jsx)(d.A.Title,{children:"Detalles de Cotizaci\xf3n"})}),(0,m.jsx)(d.A.Body,{children:w&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("p",{children:[(0,m.jsx)("strong",{children:"Nombre:"})," ",w.name]}),(0,m.jsxs)("p",{children:[(0,m.jsx)("strong",{children:"RUT:"})," ",w.rut]}),(0,m.jsxs)("p",{children:[(0,m.jsx)("strong",{children:"Tel\xe9fono:"})," ",w.phone]}),(0,m.jsxs)("p",{children:[(0,m.jsx)("strong",{children:"Email:"})," ",w.email]}),(0,m.jsxs)("p",{children:[(0,m.jsx)("strong",{children:"Direcci\xf3n/Comuna:"})," ",w.address]}),(0,m.jsxs)("p",{children:[(0,m.jsx)("strong",{children:"Altura del Cerco:"})," ",w.fenceHeight]}),(0,m.jsxs)("p",{children:[(0,m.jsx)("strong",{children:"Metros Lineales:"})," ",w.linearMeters]}),(0,m.jsxs)("p",{children:[(0,m.jsx)("strong",{children:"Mensaje Adicional:"})," ",w.message||"N/A"]}),(0,m.jsxs)("p",{children:[(0,m.jsx)("strong",{children:"Fecha de Solicitud:"})," ",new Date(w.timestamp).toLocaleString()]})]})}),(0,m.jsx)(d.A.Footer,{children:(0,m.jsx)(c.A,{variant:"secondary",onClick:C,children:"Cerrar"})})]})]})}}}]);
//# sourceMappingURL=981.81129bba.chunk.js.map