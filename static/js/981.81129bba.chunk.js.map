{"version":3,"file":"static/js/981.81129bba.chunk.js","mappings":"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","sources":["../node_modules/react-bootstrap/esm/AlertHeading.js","../node_modules/react-bootstrap/esm/AlertLink.js","../node_modules/react-bootstrap/esm/Alert.js","components/admin/AdminDashboard.jsx"],"sourcesContent":["\"use client\";\n\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport { useBootstrapPrefix } from './ThemeProvider';\nimport divWithClassName from './divWithClassName';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst DivStyledAsH4 = divWithClassName('h4');\nDivStyledAsH4.displayName = 'DivStyledAsH4';\nconst AlertHeading = /*#__PURE__*/React.forwardRef(({\n  className,\n  bsPrefix,\n  as: Component = DivStyledAsH4,\n  ...props\n}, ref) => {\n  bsPrefix = useBootstrapPrefix(bsPrefix, 'alert-heading');\n  return /*#__PURE__*/_jsx(Component, {\n    ref: ref,\n    className: classNames(className, bsPrefix),\n    ...props\n  });\n});\nAlertHeading.displayName = 'AlertHeading';\nexport default AlertHeading;","\"use client\";\n\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport Anchor from '@restart/ui/Anchor';\nimport { useBootstrapPrefix } from './ThemeProvider';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst AlertLink = /*#__PURE__*/React.forwardRef(({\n  className,\n  bsPrefix,\n  as: Component = Anchor,\n  ...props\n}, ref) => {\n  bsPrefix = useBootstrapPrefix(bsPrefix, 'alert-link');\n  return /*#__PURE__*/_jsx(Component, {\n    ref: ref,\n    className: classNames(className, bsPrefix),\n    ...props\n  });\n});\nAlertLink.displayName = 'AlertLink';\nexport default AlertLink;","\"use client\";\n\nimport classNames from 'classnames';\nimport * as React from 'react';\nimport { useUncontrolled } from 'uncontrollable';\nimport useEventCallback from '@restart/hooks/useEventCallback';\nimport { useBootstrapPrefix } from './ThemeProvider';\nimport AlertHeading from './AlertHeading';\nimport AlertLink from './AlertLink';\nimport Fade from './Fade';\nimport CloseButton from './CloseButton';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nconst Alert = /*#__PURE__*/React.forwardRef((uncontrolledProps, ref) => {\n  const {\n    bsPrefix,\n    show = true,\n    closeLabel = 'Close alert',\n    closeVariant,\n    className,\n    children,\n    variant = 'primary',\n    onClose,\n    dismissible,\n    transition = Fade,\n    ...props\n  } = useUncontrolled(uncontrolledProps, {\n    show: 'onClose'\n  });\n  const prefix = useBootstrapPrefix(bsPrefix, 'alert');\n  const handleClose = useEventCallback(e => {\n    if (onClose) {\n      onClose(false, e);\n    }\n  });\n  const Transition = transition === true ? Fade : transition;\n  const alert = /*#__PURE__*/_jsxs(\"div\", {\n    role: \"alert\",\n    ...(!Transition ? props : undefined),\n    ref: ref,\n    className: classNames(className, prefix, variant && `${prefix}-${variant}`, dismissible && `${prefix}-dismissible`),\n    children: [dismissible && /*#__PURE__*/_jsx(CloseButton, {\n      onClick: handleClose,\n      \"aria-label\": closeLabel,\n      variant: closeVariant\n    }), children]\n  });\n  if (!Transition) return show ? alert : null;\n  return /*#__PURE__*/_jsx(Transition, {\n    unmountOnExit: true,\n    ...props,\n    ref: undefined,\n    in: show,\n    children: alert\n  });\n});\nAlert.displayName = 'Alert';\nexport default Object.assign(Alert, {\n  Link: AlertLink,\n  Heading: AlertHeading\n});","import React, { useState, useEffect, useContext } from \"react\";\nimport {\n  Container,\n  Row,\n  Col,\n  Card,\n  Button,\n  Modal,\n  Alert,\n} from \"react-bootstrap\";\nimport AuthContext from \"../../context/AuthContext\";\nimport { useNavigate } from \"react-router-dom\";\nimport \"./AdminDashboard.css\";\nimport \"../ModalCommon.css\"; // Reutilizar estilos comunes de modal\n\nconst AdminDashboard = () => {\n  const { user, logout } = useContext(AuthContext);\n  const navigate = useNavigate();\n  const [quotes, setQuotes] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [showDetailModal, setShowDetailModal] = useState(false);\n  const [selectedQuote, setSelectedQuote] = useState(null);\n\n  useEffect(() => {\n    if (!user || user.role !== \"admin\") {\n      navigate(\"/administracion\"); // Redirigir si no es admin\n      return;\n    }\n\n    const fetchQuotes = async () => {\n      try {\n        const token = localStorage.getItem(\"token\");\n        const response = await fetch(\"http://localhost:5000/api/quotes\", {\n          headers: {\n            Authorization: `Bearer ${token}`,\n          },\n        });\n\n        if (!response.ok) {\n          if (response.status === 403) {\n            setError(\"No tienes permisos para ver las cotizaciones.\");\n            await logout();\n            navigate(\"/administracion\");\n          } else {\n            throw new Error(\"Error al cargar las cotizaciones.\");\n          }\n        }\n        const data = await response.json();\n        setQuotes(data);\n      } catch (err) {\n        setError(err.message);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchQuotes();\n  }, [user, navigate, logout]);\n\n  const handleShowDetail = (quote) => {\n    setSelectedQuote(quote);\n    setShowDetailModal(true);\n  };\n\n  const handleCloseDetail = () => {\n    setShowDetailModal(false);\n    setSelectedQuote(null);\n  };\n\n  if (loading) {\n    return (\n      <div className=\"admin-dashboard-section text-center text-white p-5\">\n        Cargando cotizaciones...\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"admin-dashboard-section text-center text-danger p-5\">\n        Error: {error}\n      </div>\n    );\n  }\n\n  return (\n    <section className=\"admin-dashboard-section py-5\">\n      <Container>\n        <h2 className=\"text-center mb-5 text-uppercase fw-semibold text-white\">\n          Panel de Administración - Cotizaciones\n        </h2>\n        <Row xs={1} md={2} lg={3} className=\"g-4\">\n          {quotes.length > 0 ? (\n            quotes.map((quote) => (\n              <Col key={quote.id}>\n                <Card className=\"quote-admin-card h-100\">\n                  <Card.Body className=\"d-flex flex-column\">\n                    <Card.Title className=\"fw-bold\">{quote.name}</Card.Title>\n                    <Card.Text>\n                      <strong>RUT:</strong> {quote.rut}\n                      <br />\n                      <strong>Altura Cerco:</strong> {quote.fenceHeight}\n                    </Card.Text>\n                    <Button\n                      variant=\"primary\"\n                      onClick={() => handleShowDetail(quote)}\n                      className=\"mt-auto\"\n                    >\n                      Más Información\n                    </Button>\n                  </Card.Body>\n                </Card>\n              </Col>\n            ))\n          ) : (\n            <Col>\n              <Alert variant=\"info\">No hay cotizaciones para mostrar.</Alert>\n            </Col>\n          )}\n        </Row>\n      </Container>\n\n      {/* Modal de Detalles de Cotización */}\n      <Modal\n        show={showDetailModal}\n        onHide={handleCloseDetail}\n        centered\n        size=\"lg\"\n      >\n        <Modal.Header closeButton>\n          <Modal.Title>Detalles de Cotización</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          {selectedQuote && (\n            <>\n              <p>\n                <strong>Nombre:</strong> {selectedQuote.name}\n              </p>\n              <p>\n                <strong>RUT:</strong> {selectedQuote.rut}\n              </p>\n              <p>\n                <strong>Teléfono:</strong> {selectedQuote.phone}\n              </p>\n              <p>\n                <strong>Email:</strong> {selectedQuote.email}\n              </p>\n              <p>\n                <strong>Dirección/Comuna:</strong> {selectedQuote.address}\n              </p>\n              <p>\n                <strong>Altura del Cerco:</strong> {selectedQuote.fenceHeight}\n              </p>\n              <p>\n                <strong>Metros Lineales:</strong> {selectedQuote.linearMeters}\n              </p>\n              <p>\n                <strong>Mensaje Adicional:</strong>{\" \"}\n                {selectedQuote.message || \"N/A\"}\n              </p>\n              <p>\n                <strong>Fecha de Solicitud:</strong>{\" \"}\n                {new Date(selectedQuote.timestamp).toLocaleString()}\n              </p>\n            </>\n          )}\n        </Modal.Body>\n        <Modal.Footer>\n          <Button variant=\"secondary\" onClick={handleCloseDetail}>\n            Cerrar\n          </Button>\n        </Modal.Footer>\n      </Modal>\n    </section>\n  );\n};\n\nexport default AdminDashboard;\n"],"names":["_excluded","DivStyledAsH4","divWithClassName","displayName","AlertHeading","React","_ref","ref","className","bsPrefix","as","Component","props","_objectWithoutProperties","useBootstrapPrefix","_jsx","_objectSpread","classNames","AlertLink","Anchor","Alert","uncontrolledProps","_useUncontrolled","useUncontrolled","show","closeLabel","closeVariant","children","variant","onClose","dismissible","transition","Fade","prefix","handleClose","useEventCallback","e","Transition","alert","_jsxs","role","undefined","concat","CloseButton","onClick","unmountOnExit","in","Object","assign","Link","Heading","AdminDashboard","user","logout","useContext","AuthContext","navigate","useNavigate","quotes","setQuotes","useState","loading","setLoading","error","setError","showDetailModal","setShowDetailModal","selectedQuote","setSelectedQuote","useEffect","async","token","localStorage","getItem","response","fetch","headers","Authorization","ok","status","Error","data","json","err","message","fetchQuotes","handleCloseDetail","Container","Row","xs","md","lg","length","map","quote","Col","Card","Body","Title","name","Text","rut","fenceHeight","Button","handleShowDetail","id","Modal","onHide","centered","size","Header","closeButton","_Fragment","phone","email","address","linearMeters","Date","timestamp","toLocaleString","Footer"],"sourceRoot":""}